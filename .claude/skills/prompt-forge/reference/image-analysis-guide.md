# åƒç´ çº§å›¾ç‰‡åˆ†ææŒ‡å—

æœ¬æ–‡æ¡£ä¸º `prompt-forge analyze` å‘½ä»¤æä¾›è¯¦ç»†çš„åƒç´ çº§åˆ†æè§„èŒƒä¸æ“ä½œæŒ‡å—ã€‚

## åˆ†ææµç¨‹æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: å›¾åƒæ¥æ”¶ä¸é¢„å¤„ç†                                       â”‚
â”‚  - éªŒè¯å›¾ç‰‡æ ¼å¼ä¸æ¸…æ™°åº¦                                           â”‚
â”‚  - æ£€æµ‹äººç‰©æ•°é‡ï¼ˆå•äºº/å¤šäºº/æ— äººï¼‰                                  â”‚
â”‚  - è¯„ä¼°å›¾ç‰‡è´¨é‡ï¼ˆåˆ†è¾¨ç‡/å…‰ç…§/é®æŒ¡ï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 2: åƒç´ çº§ç‰¹å¾æå–ï¼ˆå…­å¤§æ¨¡å—å¹¶è¡Œåˆ†æï¼‰                      â”‚
â”‚  â”œâ”€ æ¨¡å—1: è§’è‰²ä¸èº«ä½“å‚æ•°                                        â”‚
â”‚  â”œâ”€ æ¨¡å—2: é¢éƒ¨ç»“æ„å‚æ•°                                          â”‚
â”‚  â”œâ”€ æ¨¡å—3: è‚¤è´¨ä¸å¦†å®¹å‚æ•°                                        â”‚
â”‚  â”œâ”€ æ¨¡å—4: å§¿åŠ¿ä¸åŠ¨ä½œå‚æ•°                                        â”‚
â”‚  â”œâ”€ æ¨¡å—5: å…‰çº¿ä¸æ°›å›´å‚æ•°                                        â”‚
â”‚  â””â”€ æ¨¡å—6: åœºæ™¯ä¸æ™¯æ·±å‚æ•°                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3: ç½®ä¿¡åº¦è¯„ä¼°ä¸å‚æ•°åˆ†çº§                                   â”‚
â”‚  - [Açº§] ç›´æ¥å¯æµ‹ï¼šè„¸å‹ã€å‘è‰²ã€æœè£…é¢œè‰²                           â”‚
â”‚  - [Bçº§] æ¯”ä¾‹æ¨ç®—ï¼šèº«é«˜ä¼°ç®—ã€ä¸Šä¸‹èº«æ¯”ä¾‹                           â”‚
â”‚  - [Cçº§] ç»éªŒä¼°ç®—ï¼šå…·ä½“å›´åº¦ã€å“ç‰Œè‰²å·                             â”‚
â”‚  - [Dçº§] åœºæ™¯æ¨æ–­ï¼šå…‰çº¿è§’åº¦ã€é•œå¤´ç„¦è·                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 4: Character DNA ç”Ÿæˆ                                     â”‚
â”‚  - æŒ‰å…­å¤§æ¨¡å—ç»„è£… JSON                                           â”‚
â”‚  - æ·»åŠ ç½®ä¿¡åº¦æ ‡è®°ä¸è¯¯å·®èŒƒå›´                                       â”‚
â”‚  - ç”Ÿæˆå‹ç¼©æŒ‡ä»£å¥                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 5: äº¤äº’å¼ç¡®è®¤ï¼ˆå¯é€‰ï¼‰                                      â”‚
â”‚  - å±•ç¤ºåˆ†çº§ç»“æœ                                                  â”‚
â”‚  - é«˜äº®ä½ç½®ä¿¡åº¦å‚æ•°ä¾›ç”¨æˆ·ä¿®æ­£                                     â”‚
â”‚  - ç¡®è®¤åä¿å­˜                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç½®ä¿¡åº¦åˆ†çº§ä½“ç³»

### Açº§ - ç›´æ¥å¯æµ‹ (0.85-1.0) ğŸŸ¢

**å®šä¹‰**: ä»å›¾åƒä¸­å¯ä»¥ç›´æ¥è§‚å¯Ÿã€æ¸…æ™°è¾¨è¯†çš„ç‰¹å¾

**å…¸å‹å‚æ•°**:
- è„¸å‹è½®å»“ (oval, round, square, heart)
- å‘è‰²ä¸å‘å‹ç±»åˆ«
- æœè£…é¢œè‰²ä¸æ¬¾å¼
- å¯è§çš„å¦†å®¹é£æ ¼ (æœ‰/æ— çœ¼çº¿ã€å”‡å¦†ç±»å‹)
- å§¿åŠ¿å¤§ç±» (ç«™ç«‹/åå§¿/è¡Œèµ°)

**æµ‹é‡æ–¹æ³•**: è§†è§‰ç›´æ¥åˆ¤æ–­

### Bçº§ - æ¯”ä¾‹æ¨ç®— (0.70-0.85) ğŸŸ¡

**å®šä¹‰**: åŸºäºå¯è§æ¯”ä¾‹å…³ç³»æ¨ç®—çš„å‚æ•°ï¼Œç›¸å¯¹å¯é ä½†éç›´æ¥æµ‹é‡

**å…¸å‹å‚æ•°**:
- èº«é«˜ä¼°ç®— (åŸºäºå¤´èº«æ¯”)
- ä¸Šä¸‹èº«æ¯”ä¾‹
- è„¸é•¿å®½æ¯”
- çœ¼è·ä¸çœ¼å°ºå¯¸æ¯”ä¾‹
- å¤´éƒ¨å€¾æ–œè§’åº¦

**æµ‹é‡æ–¹æ³•**:
```javascript
// ä»¥çœ¼è·ä¸ºåŸºå‡†å•ä½ (interpupillary distance = IPD)
const ipd = distance(keypoints.leftEye, keypoints.rightEye);

// æ¨ç®—å…¶ä»–é¢éƒ¨å‚æ•°
const estimates = {
  eyeLength: ipd * 0.85,        // çœ¼é•¿ â‰ˆ 0.85 Ã— IPD
  eyeWidth: ipd * 0.34,         // çœ¼å®½ â‰ˆ 0.34 Ã— IPD
  noseHeight: ipd * 0.43,       // é¼»æ¢é«˜ â‰ˆ 0.43 Ã— IPD
  lipWidth: ipd * 1.14,         // å”‡å®½ â‰ˆ 1.14 Ã— IPD
  faceWidth: ipd * 4.5,         // è„¸å®½ â‰ˆ 4.5 Ã— IPD
  faceHeight: ipd * 6.3         // è„¸é«˜ â‰ˆ 6.3 Ã— IPD (1.4:1æ¯”ä¾‹)
};

// èº«é«˜ä¼°ç®— (åŸºäºå¤´èº«æ¯”)
// äºšæ´²å¥³æ€§å¹³å‡å¤´é•¿: 22-24cm
// å¸¸è§å¤´èº«æ¯”: 7-7.5å¤´èº«
const headLength = 23; // cm
const headBodyRatio = 7.2; // ä»å›¾åƒæµ‹é‡
const estimatedHeight = headLength * headBodyRatio; // â‰ˆ 165.6cm
```

### Cçº§ - ç»éªŒä¼°ç®— (0.50-0.70) ğŸŸ 

**å®šä¹‰**: åŸºäºç»éªŒæ•°æ®å’Œè§†è§‰çº¿ç´¢ä¼°ç®—çš„å‚æ•°ï¼Œå­˜åœ¨ä¸€å®šè¯¯å·®èŒƒå›´

**å…¸å‹å‚æ•°**:
- å…·ä½“å›´åº¦æ•°å€¼ (è‚©å®½ã€è…°å›´ã€è‡€å›´)
- å“ç‰Œè‰²å·åŒ¹é…
- çš®è‚¤åå°„ç‡
- æ°´å…‰å¼ºåº¦
- æ¯›å­”å¯†åº¦
- ç«æ¯›é•¿åº¦ã€å”‡ç çªå‡ºåº¦ç­‰ç»†èŠ‚

**æµ‹é‡æ–¹æ³•**:
```javascript
// åŸºäºå‚è€ƒæ•°æ®çš„ç»éªŒä¼°ç®—
const empiricalEstimates = {
  // è‚©å®½: åŸºäºå¤´å®½æ¯”ä¾‹ + ä½“å‹ä¿®æ­£
  shoulderWidth: headWidth * 1.8 * bodyTypeFactor,

  // çš®è‚¤åå°„ç‡: åŸºäºé«˜å…‰åŒºåŸŸäº®åº¦åˆ†æ
  skinReflectance: analyzeHighlightIntensity(cheekHighlights),

  // æ°´å…‰å¼ºåº¦: åŸºäºçš®è‚¤å…‰æ³½åº¦åˆ†æ
  dewyIntensity: analyzeSkinGloss(forehead, cheeks),

  // Pantoneè‰²å·: åŸºäºè‚¤è‰²åŒºåŸŸè‰²å½©åŒ¹é…
  pantoneEstimate: matchToPantone(skinColorSamples)
};
```

### Dçº§ - åœºæ™¯æ¨æ–­ (<0.50) ğŸ”´

**å®šä¹‰**: åŸºäºåœºæ™¯çº¿ç´¢å’Œæ‘„å½±çŸ¥è¯†æ¨æ–­çš„å‚æ•°ï¼Œä»…ä¾›å‚è€ƒ

**å…¸å‹å‚æ•°**:
- é•œå¤´ç„¦è·ä¼°ç®—
- å…‰æºå…·ä½“è§’åº¦
- è‰²æ¸©ç²¾ç¡®å€¼
- åœºæ™¯å‡ ä½•å°ºå¯¸
- åæœŸå¤„ç†å‚æ•°

**æµ‹é‡æ–¹æ³•**:
```javascript
// åŸºäºæ‘„å½±çŸ¥è¯†çš„æ¨æ–­
const inferredParams = {
  // ç„¦è·ä¼°ç®—: åŸºäºé€è§†ç•¸å˜å’Œè§†è§’
  focalLength: estimateFocalLength(perspectiveLines, faceDistortion),

  // ä¸»å…‰è§’åº¦: åŸºäºé˜´å½±æ–¹å‘å’Œé•¿åº¦
  lightAngle: analyzeShadowDirection(shadowMap),

  // è‰²æ¸©: åŸºäºé«˜å…‰/é˜´å½±è‰²å½©åç§»
  colorTemp: estimateColorTemperature(highlightTint, shadowTint)
};
```

## å…­å¤§æ¨¡å—è¯¦ç»†åˆ†æè§„èŒƒ

### æ¨¡å—1: è§’è‰²ä¸èº«ä½“å‚æ•°

#### åˆ†æè¦ç‚¹

| å‚æ•° | æµ‹é‡æ–¹æ³• | ç½®ä¿¡åº¦ | å¤‡æ³¨ |
|------|----------|--------|------|
| height_cm | å¤´èº«æ¯” Ã— æ ‡å‡†å¤´é•¿(23cm) | Bçº§ | èŒƒå›´ Â±5cm |
| body_type | è§†è§‰è¯„ä¼° | Açº§ | slender/athletic/curvy |
| proportion_upper_lower | è§†è§‰æ¯”ä¾‹æµ‹é‡ | Bçº§ | ä»¥è‚šè„ä¸ºåˆ†ç•Œ |
| shoulder_width_cm | å¤´å®½ Ã— 1.8 | Cçº§ | éœ€ä½“å‹ä¿®æ­£ç³»æ•° |
| bust_waist_hip_cm | åŸºäºè…°å›´æ¯”ä¾‹æ¨ç®— | Cçº§ | éœ€æœè£…å‚è€ƒ |
| leg_length_cm | èº«é«˜ Ã— ä¸‹èº«æ¯”ä¾‹ | Bçº§ | åŸºäºæ¯”ä¾‹æ¨ç®— |

#### å¤´èº«æ¯”å‚è€ƒè¡¨

| å¤´èº«æ¯” | è§†è§‰æ•ˆæœ | å¸¸è§äººç¾¤ |
|--------|----------|----------|
| 6.5-7.0 | å¯çˆ±/å¹¼æ€ | é’å°‘å¹´ã€å¶åƒé£æ ¼ |
| 7.0-7.5 | æ ‡å‡†æ¯”ä¾‹ | æ™®é€šæˆå¹´äºº |
| 7.5-8.0 | ä¿®é•¿ä¼˜é›… | æ¨¡ç‰¹ã€é«˜æŒ‘èº«æ |
| 8.0+ | è¶…ç°å®ä¿®é•¿ | åŠ¨æ¼«é£æ ¼ã€è‰ºæœ¯å¤„ç† |

### æ¨¡å—2: é¢éƒ¨ç»“æ„å‚æ•°

#### å…³é”®æµ‹é‡åŸºå‡†

ä»¥**çœ¼è· (IPD)** ä½œä¸ºé¢éƒ¨æµ‹é‡çš„åŸºå‡†å•ä½:
- å¹³å‡ IPD: 3.0-3.5cm (äºšæ´²å¥³æ€§)
- æ ‡å‡† IPD å¯¹åº”åƒç´ æ•°: ä»å›¾åƒæµ‹é‡

#### é¢éƒ¨æ¯”ä¾‹æ¢ç®—è¡¨

| å‚æ•° | ä¸ IPD æ¯”å€¼ | å…¸å‹å€¼ | ç½®ä¿¡åº¦ |
|------|-------------|--------|--------|
| çœ¼é•¿ | 0.85 | 2.5-3.2cm | Bçº§ |
| çœ¼å®½ | 0.34 | 1.0-1.3cm | Bçº§ |
| é¼»é«˜ | 0.43 | 1.3-1.6cm | Cçº§ |
| é¼»ç¿¼å®½ | 0.71 | 2.2-2.8cm | Cçº§ |
| å”‡å®½ | 1.14 | 3.5-4.5cm | Bçº§ |
| è„¸å®½ | 4.5 | 13-16cm | Bçº§ |
| è„¸é«˜ | 6.3 | 18-22cm | Bçº§ |

#### è„¸å‹åˆ†ç±»æ ‡å‡†

| ç±»å‹ | ç‰¹å¾ | æµ‹é‡æ–¹æ³• |
|------|------|----------|
| Oval (é¹…è›‹è„¸) | é•¿å®½æ¯” 1.3-1.4:1, ä¸‹é¢ŒæŸ”å’Œ | è½®å»“åƒç´ åˆ†æ |
| Round (åœ†è„¸) | é•¿å®½æ¯” â‰ˆ1:1, è½®å»“åœ†æ¶¦ | è½®å»“åƒç´ åˆ†æ |
| Square (æ–¹è„¸) | ä¸‹é¢Œè§’æ˜æ˜¾, Vè§’ > 130Â° | ä¸‹é¢Œè§’æµ‹é‡ |
| Heart (å¿ƒå½¢è„¸) | é¢å¤´å®½, ä¸‹å·´å°– | è½®å»“åƒç´ åˆ†æ |

#### è§’åº¦æµ‹é‡æ–¹æ³•

```javascript
// ä¸‹é¢Œ V è§’æµ‹é‡
function measureJawVAngle(faceContour) {
  const leftJaw = findJawPoint(faceContour, 'left');
  const rightJaw = findJawPoint(faceContour, 'right');
  const chin = findChinPoint(faceContour);

  const v1 = normalize(subtract(leftJaw, chin));
  const v2 = normalize(subtract(rightJaw, chin));

  const angle = Math.acos(dot(v1, v2)) * (180 / Math.PI);
  return angle; // å…¸å‹å€¼: 100-140Â°
}

// å¤´éƒ¨å€¾æ–œè§’åº¦
function measureHeadTilt(eyeLine) {
  const horizontal = { x: 1, y: 0 };
  const tilt = Math.atan2(eyeLine.y, eyeLine.x) * (180 / Math.PI);
  return tilt; // æ­£å€¼: å‘ä¸Š, è´Ÿå€¼: å‘ä¸‹
}
```

### æ¨¡å—3: è‚¤è´¨ä¸å¦†å®¹å‚æ•°

#### è‚¤è‰²åˆ†æ

**Pantone è‰²å·åŒ¹é…**:
```javascript
const pantoneSkinReferences = [
  { code: 'Cool Gray 1C', tone: 'cool porcelain', reflectance: 0.9 },
  { code: 'Warm Gray 1C', tone: 'warm ivory', reflectance: 0.85 },
  { code: '7536C', tone: 'natural beige', reflectance: 0.75 },
  { code: '7522C', tone: 'healthy tan', reflectance: 0.65 }
];
```

#### å¦†å®¹æ£€æµ‹

| å¦†å®¹å…ƒç´  | æ£€æµ‹æ–¹æ³• | ç½®ä¿¡åº¦ |
|----------|----------|--------|
| çœ¼çº¿ | è¾¹ç¼˜æ£€æµ‹ + çº¿æ¡åˆ†æ | Açº§ |
| çœ¼å½± | è‰²å½©åˆ†æ + èŒƒå›´æ£€æµ‹ | Bçº§ |
| ç«æ¯› | è¾¹ç¼˜æ£€æµ‹ + é•¿åº¦æµ‹é‡ | Bçº§ |
| å”‡å¦† | è‰²å½©åˆ†æ + å…‰æ³½åº¦æ£€æµ‹ | Açº§ |
| è…®çº¢ | è‰²å½©åˆ†æ + ä½ç½®æ£€æµ‹ | Bçº§ |
| é«˜å…‰ | äº®åº¦åˆ†æ + ä½ç½®æ£€æµ‹ | Cçº§ |

#### å…‰å­¦å±æ€§ä¼°ç®—

```javascript
// çš®è‚¤åå°„ç‡ä¼°ç®— (0-1)
function estimateReflectance(skinHighlights, skinShadows) {
  const highlightIntensity = averageBrightness(skinHighlights);
  const shadowIntensity = averageBrightness(skinShadows);
  const contrast = highlightIntensity / shadowIntensity;

  // æ˜ å°„åˆ°åå°„ç‡
  return Math.min(1.0, 0.5 + contrast * 0.3);
}

// æ°´å…‰å¼ºåº¦ä¼°ç®— (0-1)
function estimateDewyIntensity(skinGlossAreas) {
  const glossArea = measureGlossArea(skinGlossAreas);
  const glossIntensity = measureGlossIntensity(skinGlossAreas);
  return glossArea * glossIntensity;
}
```

### æ¨¡å—4: å§¿åŠ¿ä¸åŠ¨ä½œå‚æ•°

#### å§¿æ€åˆ†ç±»

| å§¿æ€ | ç‰¹å¾ | ç½®ä¿¡åº¦ |
|------|------|--------|
| standing | ç›´ç«‹ï¼ŒåŒè…¿æ”¯æ’‘ | Açº§ |
| sitting | è‡€éƒ¨æ”¯æ’‘ï¼Œè…¿éƒ¨å¼¯æ›² | Açº§ |
| leaning | èº«ä½“å€šé æ”¯æ’‘ç‰© | Açº§ |
| walking | å•è…¿æ”¯æ’‘ï¼ŒåŠ¨æ€æ¨¡ç³Š | Bçº§ |

#### è§’åº¦æµ‹é‡

```javascript
// èº«ä½“å€¾æ–œè§’åº¦
function measureBodyTilt(shoulderLine, hipLine) {
  const avgLine = average(shoulderLine, hipLine);
  const vertical = { x: 0, y: 1 };
  return angleBetween(avgLine, vertical);
}

// è§†çº¿æ–¹å‘
function measureGazeDirection(pupilPosition, eyeCenter) {
  const gazeVector = subtract(pupilPosition, eyeCenter);
  const horizontalAngle = Math.atan2(gazeVector.x, gazeVector.z);
  const verticalAngle = Math.atan2(gazeVector.y, gazeVector.z);
  return { horizontal: horizontalAngle, vertical: verticalAngle };
}
```

### æ¨¡å—5: å…‰çº¿ä¸æ°›å›´å‚æ•°

#### å…‰æºåˆ†æ

| å‚æ•° | åˆ†ææ–¹æ³• | ç½®ä¿¡åº¦ |
|------|----------|--------|
| ä¸»å…‰æ–¹å‘ | é˜´å½±æ–¹å‘åˆ†æ | Bçº§ |
| ä¸»å…‰è§’åº¦ | é˜´å½±é•¿åº¦ + å‡ ä½•æ¨ç®— | Cçº§ |
| å¯¹æ¯”åº¦ | ç›´æ–¹å›¾åˆ†æ | Bçº§ |
| é¥±å’Œåº¦ | è‰²å½©ç©ºé—´åˆ†æ | Bçº§ |
| è‰²æ¸© | é«˜å…‰/é˜´å½±è‰²å½©åç§» | Cçº§ |

#### æ°›å›´å‚æ•°

```javascript
// å¯¹æ¯”åº¦è®¡ç®—
function calculateContrast(imageHistogram) {
  const highlights = percentile(imageHistogram, 95);
  const shadows = percentile(imageHistogram, 5);
  return (highlights - shadows) / 255;
}

// é¥±å’Œåº¦è®¡ç®— (HSVç©ºé—´)
function calculateSaturation(hsvImage) {
  const sChannel = extractChannel(hsvImage, 'S');
  return average(sChannel);
}
```

### æ¨¡å—6: åœºæ™¯ä¸æ™¯æ·±å‚æ•°

#### åœºæ™¯ç±»å‹è¯†åˆ«

| ç±»å‹ | ç‰¹å¾ | ç½®ä¿¡åº¦ |
|------|------|--------|
| indoor studio | çº¯è‰²/æ¸å˜èƒŒæ™¯ï¼Œå¯æ§å…‰æº | Açº§ |
| indoor location | å®¤å†…ç¯å¢ƒï¼Œè‡ªç„¶/äººå·¥æ··åˆå…‰ | Bçº§ |
| outdoor urban | åŸå¸‚å…ƒç´ ï¼Œå¤æ‚èƒŒæ™¯ | Bçº§ |
| outdoor nature | è‡ªç„¶å…ƒç´ ï¼Œå¼€é˜”ç©ºé—´ | Açº§ |

#### æ™¯æ·±åˆ†æ

```javascript
// èƒŒæ™¯æ¨¡ç³Šåº¦ä¼°ç®— (0-1)
function estimateBackgroundBlur(edgeSharpnessMap) {
  const subjectEdges = extractSubjectEdges(edgeSharpnessMap);
  const backgroundEdges = extractBackgroundEdges(edgeSharpnessMap);

  const subjectSharpness = average(subjectEdges);
  const backgroundSharpness = average(backgroundEdges);

  return 1.0 - (backgroundSharpness / subjectSharpness);
}

// ç„¦è·ä¼°ç®— (åŸºäºé€è§†)
function estimateFocalLength(vanishingPoints, imageWidth) {
  // 35mmç­‰æ•ˆç„¦è·ä¼°ç®—
  const focalLength = calculateFromPerspective(vanishingPoints);
  return focalLength; // å…¸å‹å€¼: 24-200mm
}
```

## è´¨é‡è¯„ä¼°æ ‡å‡†

### å›¾åƒè´¨é‡è¯„åˆ†

```javascript
function assessImageQuality(image) {
  const factors = {
    resolution: scoreResolution(image.width, image.height),
    sharpness: measureSharpness(image),
    lighting: assessLighting(image),
    noise: measureNoise(image),
    occlusion: detectOcclusion(image)
  };

  const weights = {
    resolution: 0.25,
    sharpness: 0.3,
    lighting: 0.2,
    noise: 0.15,
    occlusion: 0.1
  };

  return weightedAverage(factors, weights);
}
```

### è´¨é‡ç­‰çº§

| ç­‰çº§ | åˆ†æ•° | è¯´æ˜ | åˆ†æå»ºè®® |
|------|------|------|----------|
| ä¼˜ç§€ | 90-100 | é«˜æ¸…ã€æ¸…æ™°ã€å…‰çº¿å‡åŒ€ | é€‚åˆåƒç´ çº§åˆ†æ |
| è‰¯å¥½ | 75-89 | æ¸…æ™°ï¼Œå±€éƒ¨å°é—®é¢˜ | é€‚åˆæ ‡å‡†åˆ†æ |
| ä¸€èˆ¬ | 60-74 | æœ‰æ˜æ˜¾ç¼ºé™· | ä»…é€‚åˆåŸºç¡€åˆ†æ |
| è¾ƒå·® | <60 | ä¸¥é‡è´¨é‡é—®é¢˜ | å»ºè®®æ›´æ¢å›¾ç‰‡ |

## è¾“å‡ºæ ¼å¼è§„èŒƒ

### åˆ†æç»“æœ JSON ç»“æ„

```json
{
  "analysis_summary": {
    "image_quality": "excellent",
    "quality_score": 92,
    "person_count": 1,
    "detail_level": "pixel",
    "overall_confidence": 0.72
  },
  "confidence_breakdown": {
    "A": { "count": 8, "percentage": 0.25 },
    "B": { "count": 14, "percentage": 0.45 },
    "C": { "count": 7, "percentage": 0.22 },
    "D": { "count": 3, "percentage": 0.08 }
  },
  "modules": {
    "body": { /* æ¨¡å—1æ•°æ® */ },
    "face": { /* æ¨¡å—2æ•°æ® */ },
    "skin": { /* æ¨¡å—3è‚¤è´¨æ•°æ® */ },
    "makeup": { /* æ¨¡å—3å¦†å®¹æ•°æ® */ },
    "pose": { /* æ¨¡å—4æ•°æ® */ },
    "lighting": { /* æ¨¡å—5æ•°æ® */ },
    "scene": { /* æ¨¡å—6æ•°æ® */ }
  },
  "recommendations": [
    "è‚©å®½å‚æ•°ç½®ä¿¡åº¦è¾ƒä½ï¼Œå»ºè®®æä¾›å‚è€ƒæ ‡å°º",
    "é•œå¤´ç„¦è·ä¸ºæ¨æ–­å€¼ï¼Œå®é™…å¯èƒ½æœ‰åå·®"
  ]
}
```

### å‹ç¼©æŒ‡ä»£å¥ç”Ÿæˆ

```
face[oval:1.4:120]+eye[almond:3.0x1.2:3.5]+nose[1.5:2.5:10]+lip[4:0.8/1.0]+skin[cool:0.9:0.7]+pose[stand:10down:15down]+light[warm:1.0:0.8]
```

## å¸¸è§åœºæ™¯åˆ†æå»ºè®®

### åœºæ™¯1: æ­£é¢è‚–åƒç…§
- **ä¼˜åŠ¿**: é¢éƒ¨ç‰¹å¾æ¸…æ™°å¯è§
- **å¯æµ‹å‚æ•°**: è„¸å‹ã€äº”å®˜æ¯”ä¾‹ã€å¦†å®¹
- **é™åˆ¶**: èº«ä½“æ¯”ä¾‹ã€åœºæ™¯æ·±åº¦

### åœºæ™¯2: å…¨èº«ç…§
- **ä¼˜åŠ¿**: èº«ä½“æ¯”ä¾‹ã€å§¿åŠ¿å®Œæ•´
- **å¯æµ‹å‚æ•°**: å¤´èº«æ¯”ã€ä¸Šä¸‹èº«æ¯”ä¾‹ã€æ•´ä½“å§¿æ€
- **é™åˆ¶**: é¢éƒ¨ç»†èŠ‚å¯èƒ½ä¸è¶³

### åœºæ™¯3: ä¾§é¢/åŠä¾§é¢
- **ä¼˜åŠ¿**: é¼»æ¢é«˜åº¦ã€é¢éƒ¨è½®å»“æ·±åº¦
- **å¯æµ‹å‚æ•°**: é¼»å°–è§’åº¦ã€ä¸‹å·´çªå‡ºåº¦
- **é™åˆ¶**: çœ¼è·ã€é¢éƒ¨å¯¹ç§°åº¦

### åœºæ™¯4: ç¯å¢ƒäººåƒ
- **ä¼˜åŠ¿**: åœºæ™¯ä¿¡æ¯ã€å…‰çº¿æ°›å›´
- **å¯æµ‹å‚æ•°**: åœºæ™¯ç±»å‹ã€å…‰çº¿æ–¹å‘ã€æ™¯æ·±
- **é™åˆ¶**: äººç‰©ç»†èŠ‚å¯èƒ½å—ç¯å¢ƒå½±å“
